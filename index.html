<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>CodeQuest - Dashboard</title>
    <!-- Cache buster: 2024-12-19-15:30 -->
    <link rel="stylesheet" href="css/main.css?v=999">
    <link rel="stylesheet" href="css/components.css?v=999">
    <link rel="stylesheet" href="css/animations.css?v=999">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <style>
        /* Force SVG icons to display immediately */
        .nav-btn svg { 
            opacity: 1 !important; 
            display: inline-block !important;
            visibility: visible !important;
            width: 16px !important;
            height: 16px !important;
            fill: currentColor !important;
        }
        .nav-btn {
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
        }
        .nav-grid { 
            visibility: visible !important;
            display: grid !important;
        }
        
        /* Stamped Metal Style for Dashboard Boxes */
        .profile-card, .progress-card, .achievements {
            background: linear-gradient(145deg, #e6e6e6, #ffffff) !important;
            border: 2px solid #d4d4d4 !important;
            box-shadow: 
                inset 2px 2px 5px rgba(0,0,0,0.2),
                inset -2px -2px 5px rgba(255,255,255,0.7),
                2px 2px 8px rgba(0,0,0,0.15) !important;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8) !important;
        }
        
        .profile-card h2, .progress-card h3, .achievements h3 {
            color: #4a4a4a !important;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8) !important;
            font-weight: 600 !important;
        }
        
        .xp-bar {
            background: linear-gradient(145deg, #d4d4d4, #f0f0f0) !important;
            border: 1px inset #c0c0c0 !important;
            box-shadow: inset 1px 1px 3px rgba(0,0,0,0.3) !important;
        }
        
        .xp-fill {
            background: linear-gradient(145deg, #4CAF50, #66BB6A) !important;
            box-shadow: 
                inset 1px 1px 2px rgba(255,255,255,0.3),
                inset -1px -1px 2px rgba(0,0,0,0.2) !important;
        }
        
        .nav-btn {
            background: linear-gradient(145deg, #e6e6e6, #ffffff) !important;
            border: 2px outset #d4d4d4 !important;
            box-shadow: 
                2px 2px 5px rgba(0,0,0,0.2),
                inset 1px 1px 2px rgba(255,255,255,0.7) !important;
            color: #4a4a4a !important;
            text-shadow: 1px 1px 1px rgba(255,255,255,0.8) !important;
            transition: all 0.1s !important;
        }
        
        .nav-btn:hover {
            background: linear-gradient(145deg, #f0f0f0, #e6e6e6) !important;
            border: 2px inset #d4d4d4 !important;
            box-shadow: 
                inset 2px 2px 5px rgba(0,0,0,0.2),
                inset -1px -1px 2px rgba(255,255,255,0.7) !important;
            transform: translateY(1px) !important;
        }
        
        .nav-btn:active {
            box-shadow: 
                inset 3px 3px 6px rgba(0,0,0,0.3),
                inset -1px -1px 2px rgba(255,255,255,0.5) !important;
            transform: translateY(2px) !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-brand">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10Z"/>
                    </svg>
                    <h1>CodeQuest</h1>
                </div>
                <p class="tagline">Master Web Development Through Interactive Learning</p>
            </div>
            <div class="header-actions">
                <div class="user-info">
                    <div class="user-avatar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                        </svg>
                    </div>
                    <div class="user-details">
                        <span id="username">Learner</span>
                        <span id="level">Level 1</span>
                    </div>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,18C11.11,18 10.26,17.8 9.5,17.46C11.56,16.06 13,13.72 13,11A6,6 0 0,0 7,5C8.2,3.78 9.96,3 12,3A9,9 0 0,1 21,12A9,9 0 0,1 12,21C12.64,20.68 12,19.9 12,18Z"/>
                    </svg>
                </button>
            </div>
        </header>

        <main class="dashboard">
            <div class="profile-section">
                <div class="profile-card">
                    <div class="profile-info">
                        <div class="avatar">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                            </svg>
                        </div>
                        <div class="user-details">
                            <h3>Alex Johnson</h3>
                            <span class="level">Level 1 ‚Ä¢ Beginner</span>
                        </div>
                    </div>
                    
                    <div class="stats">
                        <div class="stat">
                            <span class="stat-number" id="streakCount">0</span>
                            <span class="stat-label">Day Streak</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="challengesCount">0</span>
                            <span class="stat-label">Challenges</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="lessonsCount">0</span>
                            <span class="stat-label">Lessons</span>
                        </div>
                    </div>
                </div>
                
                <div class="learning-path-card">
                    <h4>Your Learning Path</h4>
                    <div class="path-progress">
                        <div class="path-item active">
                            <div class="path-icon">üìù</div>
                            <span>HTML Basics</span>
                        </div>
                        <div class="path-connector"></div>
                        <div class="path-item">
                            <div class="path-icon">üé®</div>
                            <span>CSS Styling</span>
                        </div>
                        <div class="path-connector"></div>
                        <div class="path-item">
                            <div class="path-icon">‚ö°</div>
                            <span>JavaScript</span>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions-card">
                    <h4>Quick Actions</h4>
                    <div class="actions-grid">
                        <a href="html-editor.html" class="action-btn">
                            <div class="action-icon">üíª</div>
                            <span>Code Editor</span>
                        </a>
                        <a href="challenges.html" class="action-btn">
                            <div class="action-icon">üéØ</div>
                            <span>Challenges</span>
                        </a>
                        <a href="resources.html" class="action-btn">
                            <div class="action-icon">üìö</div>
                            <span>Resources</span>
                        </a>
                        <a href="tutorials/html-basics.html" class="action-btn">
                            <div class="action-icon">üöÄ</div>
                            <span>Start Learning</span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="progress-section">
                <div class="progress-card">
                    <h3>Overall Learning Progress</h3>
                    <div class="overall-progress-display">
                        <div class="progress-circle">
                            <svg width="120" height="120">
                                <circle cx="60" cy="60" r="50" fill="none" stroke="#e2e8f0" stroke-width="8"/>
                                <circle cx="60" cy="60" r="50" fill="none" stroke="#10b981" stroke-width="8" 
                                        stroke-dasharray="314" stroke-dashoffset="314" id="progressCircle"/>
                            </svg>
                            <div class="progress-text">
                                <span id="overallPercent">0%</span>
                                <small>Complete</small>
                            </div>
                        </div>
                        <div class="progress-details">
                            <div class="detail-item">
                                <span class="detail-number" id="completedChapters">0</span>
                                <span class="detail-label">Chapters Completed</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-number" id="totalChapters">24</span>
                                <span class="detail-label">Total Chapters</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-number" id="currentLevel">1</span>
                                <span class="detail-label">Current Level</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="navigation-section">
                <h2>Explore CodeQuest</h2>
                <div class="nav-grid">
                    <a href="html-editor.html" class="nav-btn editor-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,17.56L16.07,16.43L16.62,10.33H9.38L9.2,8.3H16.8L17,6.31H7L7.56,12.32H14.45L14.22,14.9L12,15.5L9.78,14.9L9.64,13.24H7.64L7.93,16.43L12,17.56M4.07,3H19.93L18.5,19.2L12,21L5.5,19.2L4.07,3Z"/>
                        </svg>
                        HTML Editor
                    </a>
                    <a href="css-editor.html" class="nav-btn editor-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5,3L4.35,6.34H17.94L17.5,8.5H3.92L3.26,11.83H16.85L16.09,15.64L10.61,17.45L5.86,15.64L6.19,14H2.85L2.06,18L9.91,21L18.96,18L20.16,11.97L20.4,10.76L21.94,3H5Z"/>
                        </svg>
                        CSS Editor
                    </a>
                    <a href="js-editor.html" class="nav-btn editor-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3,3H21V21H3V3M7.73,18.04C8.13,18.89 8.92,19.59 10.27,19.59C11.77,19.59 12.8,18.79 12.8,17.04V11.26H11.1V17C11.1,17.86 10.75,18.08 10.2,18.08C9.62,18.08 9.38,17.68 9.11,17.21L7.73,18.04M13.71,17.86C14.21,18.84 15.22,19.59 16.8,19.59C18.4,19.59 19.6,18.76 19.6,17.23C19.6,15.82 18.79,15.19 17.35,14.57L16.93,14.39C16.2,14.08 15.89,13.87 15.89,13.37C15.89,12.96 16.2,12.64 16.7,12.64C17.18,12.64 17.5,12.85 17.79,13.37L19.1,12.5C18.55,11.54 17.77,11.17 16.7,11.17C15.19,11.17 14.22,12.13 14.22,13.4C14.22,14.78 15.03,15.43 16.25,15.95L16.67,16.13C17.45,16.47 17.91,16.68 17.91,17.26C17.91,17.74 17.46,18.09 16.76,18.09C15.93,18.09 15.45,17.66 15.09,17.06L13.71,17.86Z"/>
                        </svg>
                        JS Editor
                    </a>
                    <a href="challenges.html" class="nav-btn challenges-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10Z"/>
                        </svg>
                        Challenges
                    </a>
                    <a href="gamification.html" class="nav-btn gamification-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5,16L3,5H1V3H4L6,14L7,18H20V16H8L7,15L17,13L18.78,6H6.14L5.96,5H21V7H19.65L18.14,15H8.64L5,16Z"/>
                        </svg>
                        Gamification
                    </a>
                    <a href="resources.html" class="nav-btn resources-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M19,19H5V5H19V19Z"/>
                        </svg>
                        Resources
                    </a>
                    <a href="advanced.html" class="nav-btn advanced-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"/>
                        </svg>
                        Advanced
                    </a>
                    <a href="ui-components.html" class="nav-btn ui-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                        </svg>
                        UI System
                    </a>
                    <a href="tutorials/html-basics.html" class="nav-btn semantic-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,17.56L16.07,16.43L16.62,10.33H9.38L9.2,8.3H16.8L17,6.31H7L7.56,12.32H14.45L14.22,14.9L12,15.5L9.78,14.9L9.64,13.24H7.64L7.93,16.43L12,17.56M4.07,3H19.93L18.5,19.2L12,21L5.5,19.2L4.07,3Z"/>
                        </svg>
                        HTML Tutorial
                    </a>
                    <a href="tutorials/css-fundamentals.html" class="nav-btn css-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5,3L4.35,6.34H17.94L17.5,8.5H3.92L3.26,11.83H16.85L16.09,15.64L10.61,17.45L5.86,15.64L6.19,14H2.85L2.06,18L9.91,21L18.96,18L20.16,11.97L20.4,10.76L21.94,3H5Z"/>
                        </svg>
                        CSS Tutorial
                    </a>
                    <a href="tutorials/javascript-basics.html" class="nav-btn js-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3,3H21V21H3V3M7.73,18.04C8.13,18.89 8.92,19.59 10.27,19.59C11.77,19.59 12.8,18.79 12.8,17.04V11.26H11.1V17C11.1,17.86 10.75,18.08 10.2,18.08C9.62,18.08 9.38,17.68 9.11,17.21L7.73,18.04M13.71,17.86C14.21,18.84 15.22,19.59 16.8,19.59C18.4,19.59 19.6,18.76 19.6,17.23C19.6,15.82 18.79,15.19 17.35,14.57L16.93,14.39C16.2,14.08 15.89,13.87 15.89,13.37C15.89,12.96 16.2,12.64 16.7,12.64C17.18,12.64 17.5,12.85 17.79,13.37L19.1,12.5C18.55,11.54 17.77,11.17 16.7,11.17C15.19,11.17 14.22,12.13 14.22,13.4C14.22,14.78 15.03,15.43 16.25,15.95L16.67,16.13C17.45,16.47 17.91,16.68 17.91,17.26C17.91,17.74 17.46,18.09 16.76,18.09C15.93,18.09 15.45,17.66 15.09,17.06L13.71,17.86Z"/>
                        </svg>
                        JS Tutorial
                    </a>
                    <a href="concepts-demo.html" class="nav-btn concepts-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9,12A3,3 0 0,0 12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                        </svg>
                        JS Concepts
                    </a>
                    <a href="challenge-demo.html" class="nav-btn challenge-demo-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.5,4A5.5,5.5 0 0,0 2,9.5C2,10 2.09,10.5 2.22,11H6.3L7.57,7.63C7.87,6.83 9.05,6.75 9.43,7.63L11.5,13L12.09,11.58C12.22,11.25 12.57,11 13,11H21.78C21.91,10.5 22,10 22,9.5A5.5,5.5 0 0,0 16.5,4C14.64,4 13.04,4.92 12,6.34C10.96,4.92 9.36,4 7.5,4M3,12.5A1,1 0 0,0 2,13.5A1,1 0 0,0 3,14.5H5.44L11,20C12,20.9 12,20.9 13,20L18.56,14.5H21A1,1 0 0,0 22,13.5A1,1 0 0,0 21,12.5H13.4L12.47,14.8C12.07,15.81 10.92,15.67 10.55,14.83L8.5,9.5L7.54,11.83C7.39,12.21 7.05,12.5 6.6,12.5H3Z"/>
                        </svg>
                        Challenge Demo
                    </a>
                    <a href="validation-demo.html" class="nav-btn validation-demo-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                        </svg>
                        Validation Demo
                    </a>
                    <a href="study-dashboard.html" class="nav-btn progress-dashboard-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3,3V21H21V19H5V3H3M9,17H7V10H9V17M13,17H11V6H13V17M17,17H15V13H17V17Z"/>
                        </svg>
                        Study Dashboard
                    </a>
                    <a href="achievements-demo.html" class="nav-btn achievements-demo-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5,16L3,5H1V3H4L6,14L7,18H20V16H8L7,15L17,13L18.78,6H6.14L5.96,5H21V7H19.65L18.14,15H8.64L5,16M12,2L13.09,8.26L22,9L17,14L18.18,23L12,19.77L5.82,23L7,14L2,9L10.91,8.26L12,2Z"/>
                        </svg>
                        Achievements Demo
                    </a>
                    <a href="bonus-features.html" class="nav-btn bonus-features-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.46,13.97L5.82,21L12,17.27Z"/>
                        </svg>
                        Bonus Features
                    </a>
                    <a href="performance-dashboard.html" class="nav-btn performance-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13,2.05V5.08C16.39,5.57 19,8.47 19,12C19,12.9 18.82,13.75 18.5,14.54L21.12,16.07C21.68,14.83 22,13.45 22,12C22,6.82 18.05,2.55 13,2.05M12,19C8.13,19 5,15.87 5,12C5,8.47 7.61,5.57 11,5.08V2.05C5.94,2.55 2,6.81 2,12C2,17.52 6.48,22 12,22C14.8,22 17.29,20.85 19.1,18.9L16.46,17.4C15.22,18.39 13.68,19 12,19M8,12A4,4 0 0,1 12,8V12L15.5,15.5C14.33,16.69 12.74,17.24 11.15,17.1C9.56,16.96 8.17,16.5 7.1,15.43C6.03,14.36 5.57,12.97 5.43,11.38C5.29,9.79 5.84,8.2 7.03,7.03L8,12Z"/>
                        </svg>
                        Performance
                    </a>
                    <a href="learning-path.html" class="nav-btn learning-path-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                        </svg>
                        Learning Path
                    </a>
                    <a href="system-monitor.html" class="nav-btn system-monitor-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21,16V4H3V16H21M21,2A2,2 0 0,1 23,4V16A2,2 0 0,1 21,18H14L16,21V22H8V21L10,18H3C1.89,18 1,17.1 1,16V4C1,2.89 1.89,2 3,2H21Z"/>
                        </svg>
                        System Monitor
                    </a>
                </div>
            </div>
        </main>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/study-tracker.js"></script>
    <script src="js/challenge-validator.js"></script>
    <script src="js/performance-optimizer.js"></script>
    <script src="js/theme-toggle.js"></script>
    <script>
        // Theme toggle function
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }
        
        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        const learningPath = {
            "level-1": {
                title: "Level 1: Beginner",
                description: "Start your web development journey",
                subjects: {
                    "html-fundamentals": {
                        title: "HTML Fundamentals",
                        chapters: [
                            { id: 1, title: "HTML Basics" },
                            { id: 2, title: "HTML Elements" },
                            { id: 3, title: "Text & Formatting" },
                            { id: 4, title: "Links & Images" }
                        ]
                    },
                    "css-basics": {
                        title: "CSS Basics",
                        chapters: [
                            { id: 5, title: "CSS Introduction" },
                            { id: 6, title: "Colors & Fonts" },
                            { id: 7, title: "Box Model" },
                            { id: 8, title: "Basic Layout" }
                        ]
                    }
                }
            },
            "level-2": {
                title: "Level 2: Intermediate",
                description: "Build interactive websites",
                subjects: {
                    "advanced-css": {
                        title: "Advanced CSS",
                        chapters: [
                            { id: 9, title: "Flexbox Layout" },
                            { id: 10, title: "CSS Grid" },
                            { id: 11, title: "Responsive Design" },
                            { id: 12, title: "Animations" }
                        ]
                    },
                    "javascript-fundamentals": {
                        title: "JavaScript Fundamentals",
                        chapters: [
                            { id: 13, title: "JS Basics" },
                            { id: 14, title: "Functions" },
                            { id: 15, title: "Arrays & Objects" },
                            { id: 16, title: "DOM Basics" }
                        ]
                    }
                }
            },
            "level-3": {
                title: "Level 3: Advanced",
                description: "Master advanced concepts",
                subjects: {
                    "advanced-javascript": {
                        title: "Advanced JavaScript",
                        chapters: [
                            { id: 17, title: "Events & Interactions" },
                            { id: 18, title: "Control Flow" },
                            { id: 19, title: "Async Programming" },
                            { id: 20, title: "Error Handling" }
                        ]
                    },
                    "web-projects": {
                        title: "Web Projects",
                        chapters: [
                            { id: 21, title: "Todo App" },
                            { id: 22, title: "Weather App" },
                            { id: 23, title: "Calculator" },
                            { id: 24, title: "Portfolio Site" }
                        ]
                    }
                }
            }
        };

        let userProgress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

        function renderDashboardPath() {
            const container = document.getElementById('dashboardPathContainer');
            container.innerHTML = '';

            Object.entries(learningPath).forEach(([levelId, level]) => {
                const levelProgress = calculateLevelProgress(level);
                const allChapters = Object.values(level.subjects).flatMap(subject => subject.chapters);
                
                const levelEl = document.createElement('div');
                levelEl.style.cssText = 'background: white; margin: 10px 0; padding: 15px; border-radius: 8px; cursor: pointer; border: 1px solid #e2e8f0; transition: all 0.2s;';
                levelEl.onmouseover = () => levelEl.style.transform = 'translateY(-2px)';
                levelEl.onmouseout = () => levelEl.style.transform = 'translateY(0)';
                
                levelEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <h4 style="margin: 0; color: #1e293b;">${level.title}</h4>
                        <span style="font-size: 12px; background: #f1f5f9; padding: 2px 8px; border-radius: 12px;">${levelProgress}%</span>
                    </div>
                    <p style="margin: 0 0 8px 0; font-size: 14px; color: #64748b;">${level.description}</p>
                    <div style="font-size: 12px; color: #64748b;">
                        ${allChapters.length} chapters ‚Ä¢ ${allChapters.filter(ch => userProgress[ch.id]?.completed).length} completed
                    </div>
                `;
                
                levelEl.onclick = () => showDashboardLevelView(levelId, level);
                container.appendChild(levelEl);
            });
        }

        function showDashboardLevelView(levelId, level) {
            const mainView = document.getElementById('mainPathView');
            const detailView = document.getElementById('levelPathDetailView');
            const levelProgress = calculateLevelProgress(level);
            const totalChapters = Object.values(level.subjects).reduce((sum, subject) => sum + subject.chapters.length, 0);
            const completedChapters = Object.values(level.subjects).reduce((sum, subject) => 
                sum + subject.chapters.filter(chapter => userProgress[chapter.id]?.completed).length, 0);
            
            mainView.style.display = 'none';
            detailView.style.display = 'block';
            
            detailView.innerHTML = `
                <button onclick="showDashboardMainView()" style="background: #64748b; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; margin-bottom: 15px;">‚Üê Back</button>
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <h3 style="margin: 0 0 5px 0;">${level.title}</h3>
                    <p style="margin: 0 0 8px 0; opacity: 0.9;">${level.description}</p>
                    <div style="font-size: 14px;">${levelProgress}% Complete (${completedChapters}/${totalChapters} chapters)</div>
                    <div style="width: 100%; height: 6px; background: rgba(255,255,255,0.2); border-radius: 3px; margin-top: 8px;">
                        <div style="width: ${levelProgress}%; height: 100%; background: white; border-radius: 3px;"></div>
                    </div>
                </div>
                ${Object.entries(level.subjects).map(([subjectId, subject]) => renderDashboardSubject(subject)).join('')}
            `;
        }

        function renderDashboardSubject(subject) {
            const completedChapters = subject.chapters.filter(chapter => userProgress[chapter.id]?.completed).length;
            const totalChapters = subject.chapters.length;
            const subjectProgress = (completedChapters / totalChapters) * 100;

            return `
                <div style="background: white; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid #e2e8f0;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h4 style="margin: 0; color: #1e293b;">${subject.title}</h4>
                        <span style="font-size: 12px; background: ${completedChapters === totalChapters ? '#dcfce7' : '#fef3c7'}; color: ${completedChapters === totalChapters ? '#166534' : '#92400e'}; padding: 2px 8px; border-radius: 12px;">
                            ${completedChapters}/${totalChapters}
                        </span>
                    </div>
                    <div style="width: 100%; height: 6px; background: #e2e8f0; border-radius: 3px; margin-bottom: 10px;">
                        <div style="width: ${subjectProgress}%; height: 100%; background: #10b981; border-radius: 3px;"></div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px;">
                        ${subject.chapters.map(chapter => `
                            <div style="padding: 8px; border: 1px solid ${userProgress[chapter.id]?.completed ? '#10b981' : '#e2e8f0'}; border-radius: 6px; font-size: 14px; ${userProgress[chapter.id]?.completed ? 'background: #f0fdf4;' : ''}">
                                ${userProgress[chapter.id]?.completed ? '‚úÖ' : '‚ñ∂Ô∏è'} ${chapter.title}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function showDashboardMainView() {
            document.getElementById('mainPathView').style.display = 'block';
            document.getElementById('levelPathDetailView').style.display = 'none';
        }

        function calculateLevelProgress(level) {
            const totalChapters = Object.values(level.subjects).reduce((sum, subject) => sum + subject.chapters.length, 0);
            const completedChapters = Object.values(level.subjects).reduce((sum, subject) => 
                sum + subject.chapters.filter(chapter => userProgress[chapter.id]?.completed).length, 0);
            return Math.round((completedChapters / totalChapters) * 100);
        }

        function updateDashboardProgress() {
            const totalChapters = Object.values(learningPath).reduce((sum, level) => 
                sum + Object.values(level.subjects).reduce((subSum, subject) => 
                    subSum + subject.chapters.length, 0), 0);
            const completedChapters = Object.keys(userProgress).filter(id => userProgress[id]?.completed).length;
            const percentage = Math.round((completedChapters / totalChapters) * 100);
            
            // Update progress circle
            const circumference = 314;
            const offset = circumference - (percentage / 100) * circumference;
            document.getElementById('progressCircle').style.strokeDashoffset = offset;
            
            // Update text displays
            document.getElementById('overallPercent').textContent = percentage + '%';
            document.getElementById('completedChapters').textContent = completedChapters;
            document.getElementById('totalChapters').textContent = totalChapters;
            
            // Determine current level
            let currentLevel = 1;
            for (let i = 1; i <= 3; i++) {
                const level = learningPath[`level-${i}`];
                const levelCompleted = Object.values(level.subjects).every(subject => 
                    subject.chapters.every(chapter => userProgress[chapter.id]?.completed));
                if (levelCompleted) currentLevel = i + 1;
            }
            document.getElementById('currentLevel').textContent = Math.min(currentLevel, 3);
        }

        // Redirect to force cache bypass
        if (!window.location.search) {
            window.location.href = window.location.href + '?refresh=' + Date.now();
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboardProgress();
        });
    </script>
    <style>
        .overall-progress-display {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-top: 20px;
        }
        .progress-circle {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .progress-circle svg {
            transform: rotate(-90deg);
        }
        .progress-text {
            position: absolute;
            text-align: center;
        }
        .progress-text span {
            font-size: 24px;
            font-weight: 700;
            color: #10b981;
            display: block;
        }
        .progress-text small {
            font-size: 12px;
            color: #64748b;
        }
        .progress-details {
            display: grid;
            gap: 20px;
        }
        .detail-item {
            text-align: center;
        }
        .detail-number {
            display: block;
            font-size: 28px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
        }
        .detail-label {
            font-size: 14px;
            color: #64748b;
        }
        @media (max-width: 768px) {
            .overall-progress-display {
                flex-direction: column;
                gap: 20px;
            }
            .progress-details {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }
        }
    </style>
    <script src="js/app.js"></script>
</body>
</html>