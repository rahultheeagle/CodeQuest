<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Monitor - CodeQuest</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0f172a; color: #e2e8f0; }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .header { background: #1e293b; padding: 20px; border-radius: 12px; margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { font-size: 24px; font-weight: 600; color: #f1f5f9; }
        
        .btn { background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; text-decoration: none; font-size: 14px; margin-left: 8px; }
        .btn:hover { background: #2563eb; }
        .btn.secondary { background: #64748b; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 24px; }
        .card { background: #1e293b; border-radius: 12px; padding: 20px; border: 1px solid #334155; }
        
        .metric-header { display: flex; justify-content: between; align-items: center; margin-bottom: 16px; }
        .metric-title { font-size: 16px; font-weight: 600; color: #f1f5f9; }
        .metric-value { font-size: 24px; font-weight: 700; margin-bottom: 8px; }
        .metric-unit { font-size: 14px; color: #94a3b8; }
        
        .progress-bar { width: 100%; height: 8px; background: #334155; border-radius: 4px; overflow: hidden; margin-top: 12px; }
        .progress-fill { height: 100%; transition: width 0.3s; }
        
        .status-good { color: #10b981; }
        .status-warning { color: #f59e0b; }
        .status-critical { color: #ef4444; }
        
        .fill-good { background: #10b981; }
        .fill-warning { background: #f59e0b; }
        .fill-critical { background: #ef4444; }
        
        .chart-container { height: 200px; background: #0f172a; border-radius: 8px; padding: 16px; margin-top: 16px; position: relative; overflow: hidden; }
        .chart-line { position: absolute; bottom: 16px; left: 16px; right: 16px; height: 120px; }
        
        .system-info { background: #1e293b; border-radius: 12px; padding: 20px; margin-bottom: 24px; }
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; }
        .info-item { padding: 12px; background: #0f172a; border-radius: 8px; }
        .info-label { font-size: 12px; color: #94a3b8; text-transform: uppercase; margin-bottom: 4px; }
        .info-value { font-size: 14px; font-weight: 600; }
        
        .process-list { background: #1e293b; border-radius: 12px; padding: 20px; }
        .process-table { width: 100%; border-collapse: collapse; }
        .process-table th, .process-table td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #334155; }
        .process-table th { background: #0f172a; font-size: 12px; color: #94a3b8; text-transform: uppercase; }
        
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
            .info-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ•Ô∏è System Monitor</h1>
            <div>
                <button class="btn" onclick="refreshData()">Refresh</button>
                <a href="index.html" class="btn secondary">‚Üê Back</a>
            </div>
        </div>

        <div class="system-info">
            <h3 style="margin-bottom: 16px;">System Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Platform</div>
                    <div class="info-value" id="platform">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">User Agent</div>
                    <div class="info-value" id="userAgent">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Screen Resolution</div>
                    <div class="info-value" id="resolution">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Timezone</div>
                    <div class="info-value" id="timezone">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Language</div>
                    <div class="info-value" id="language">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Online Status</div>
                    <div class="info-value" id="online">-</div>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <div class="metric-header">
                    <div class="metric-title">Memory Usage</div>
                </div>
                <div class="metric-value status-good" id="memoryValue">0 MB</div>
                <div class="metric-unit">Used Heap Memory</div>
                <div class="progress-bar">
                    <div class="progress-fill fill-good" id="memoryProgress"></div>
                </div>
                <div class="chart-container">
                    <canvas id="memoryChart" width="300" height="120"></canvas>
                </div>
            </div>

            <div class="card">
                <div class="metric-header">
                    <div class="metric-title">Storage Usage</div>
                </div>
                <div class="metric-value status-good" id="storageValue">0 KB</div>
                <div class="metric-unit">LocalStorage Used</div>
                <div class="progress-bar">
                    <div class="progress-fill fill-good" id="storageProgress"></div>
                </div>
            </div>

            <div class="card">
                <div class="metric-header">
                    <div class="metric-title">Network Status</div>
                </div>
                <div class="metric-value status-good" id="networkValue">Online</div>
                <div class="metric-unit">Connection Type: <span id="connectionType">-</span></div>
                <div style="margin-top: 12px;">
                    <div style="font-size: 14px; margin-bottom: 4px;">Downlink: <span id="downlink">-</span></div>
                    <div style="font-size: 14px;">RTT: <span id="rtt">-</span></div>
                </div>
            </div>

            <div class="card">
                <div class="metric-header">
                    <div class="metric-title">Performance</div>
                </div>
                <div class="metric-value status-good" id="performanceValue">0 ms</div>
                <div class="metric-unit">Page Load Time</div>
                <div style="margin-top: 12px;">
                    <div style="font-size: 14px; margin-bottom: 4px;">DOM Ready: <span id="domReady">-</span></div>
                    <div style="font-size: 14px;">First Paint: <span id="firstPaint">-</span></div>
                </div>
            </div>
        </div>

        <div class="process-list">
            <h3 style="margin-bottom: 16px;">Browser Tabs & Resources</h3>
            <table class="process-table">
                <thead>
                    <tr>
                        <th>Resource</th>
                        <th>Status</th>
                        <th>Size</th>
                        <th>Load Time</th>
                    </tr>
                </thead>
                <tbody id="resourceTable">
                    <tr>
                        <td>Current Page</td>
                        <td><span class="status-good">Active</span></td>
                        <td id="pageSize">-</td>
                        <td id="pageLoadTime">-</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let memoryData = [];
        let memoryChart;

        function initializeMonitor() {
            updateSystemInfo();
            updateMetrics();
            initMemoryChart();
            
            // Update metrics every 2 seconds
            setInterval(updateMetrics, 2000);
        }

        function updateSystemInfo() {
            document.getElementById('platform').textContent = navigator.platform;
            document.getElementById('userAgent').textContent = navigator.userAgent.split(' ')[0];
            document.getElementById('resolution').textContent = `${screen.width}x${screen.height}`;
            document.getElementById('timezone').textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;
            document.getElementById('language').textContent = navigator.language;
            document.getElementById('online').textContent = navigator.onLine ? 'Online' : 'Offline';
            
            // Network information if available
            if ('connection' in navigator) {
                const conn = navigator.connection;
                document.getElementById('connectionType').textContent = conn.effectiveType || 'Unknown';
                document.getElementById('downlink').textContent = conn.downlink ? `${conn.downlink} Mbps` : 'Unknown';
                document.getElementById('rtt').textContent = conn.rtt ? `${conn.rtt} ms` : 'Unknown';
            }
        }

        function updateMetrics() {
            // Memory usage
            if ('memory' in performance) {
                const memory = performance.memory;
                const usedMB = Math.round(memory.usedJSHeapSize / 1024 / 1024);
                const totalMB = Math.round(memory.totalJSHeapSize / 1024 / 1024);
                const percentage = (usedMB / totalMB) * 100;
                
                document.getElementById('memoryValue').textContent = `${usedMB} MB`;
                document.getElementById('memoryProgress').style.width = `${percentage}%`;
                
                // Update memory chart
                memoryData.push(usedMB);
                if (memoryData.length > 50) memoryData.shift();
                updateMemoryChart();
                
                // Update status color
                const memoryEl = document.getElementById('memoryValue');
                const progressEl = document.getElementById('memoryProgress');
                if (percentage > 80) {
                    memoryEl.className = 'metric-value status-critical';
                    progressEl.className = 'progress-fill fill-critical';
                } else if (percentage > 60) {
                    memoryEl.className = 'metric-value status-warning';
                    progressEl.className = 'progress-fill fill-warning';
                } else {
                    memoryEl.className = 'metric-value status-good';
                    progressEl.className = 'progress-fill fill-good';
                }
            }

            // Storage usage
            let storageUsed = 0;
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key)) {
                    storageUsed += localStorage[key].length;
                }
            }
            const storageKB = Math.round(storageUsed / 1024);
            document.getElementById('storageValue').textContent = `${storageKB} KB`;
            
            const storagePercentage = (storageKB / 5120) * 100; // Assume 5MB limit
            document.getElementById('storageProgress').style.width = `${Math.min(storagePercentage, 100)}%`;

            // Network status
            document.getElementById('networkValue').textContent = navigator.onLine ? 'Online' : 'Offline';
            document.getElementById('networkValue').className = navigator.onLine ? 'metric-value status-good' : 'metric-value status-critical';

            // Performance metrics
            if ('timing' in performance) {
                const timing = performance.timing;
                const loadTime = timing.loadEventEnd - timing.navigationStart;
                const domReady = timing.domContentLoadedEventEnd - timing.navigationStart;
                
                document.getElementById('performanceValue').textContent = `${loadTime} ms`;
                document.getElementById('domReady').textContent = `${domReady} ms`;
                
                if ('getEntriesByType' in performance) {
                    const paintEntries = performance.getEntriesByType('paint');
                    const firstPaint = paintEntries.find(entry => entry.name === 'first-paint');
                    if (firstPaint) {
                        document.getElementById('firstPaint').textContent = `${Math.round(firstPaint.startTime)} ms`;
                    }
                }
            }

            // Update page size
            const pageSize = document.documentElement.outerHTML.length;
            document.getElementById('pageSize').textContent = `${Math.round(pageSize / 1024)} KB`;
            document.getElementById('pageLoadTime').textContent = `${performance.now().toFixed(0)} ms`;
        }

        function initMemoryChart() {
            const canvas = document.getElementById('memoryChart');
            memoryChart = canvas.getContext('2d');
            canvas.width = 300;
            canvas.height = 120;
        }

        function updateMemoryChart() {
            if (!memoryChart || memoryData.length === 0) return;
            
            const canvas = memoryChart.canvas;
            memoryChart.clearRect(0, 0, canvas.width, canvas.height);
            
            const maxValue = Math.max(...memoryData, 50);
            const stepX = canvas.width / (memoryData.length - 1);
            
            memoryChart.strokeStyle = '#10b981';
            memoryChart.lineWidth = 2;
            memoryChart.beginPath();
            
            memoryData.forEach((value, index) => {
                const x = index * stepX;
                const y = canvas.height - (value / maxValue) * canvas.height;
                
                if (index === 0) {
                    memoryChart.moveTo(x, y);
                } else {
                    memoryChart.lineTo(x, y);
                }
            });
            
            memoryChart.stroke();
        }

        function refreshData() {
            updateSystemInfo();
            updateMetrics();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeMonitor);

        // Handle online/offline events
        window.addEventListener('online', updateMetrics);
        window.addEventListener('offline', updateMetrics);
    </script>
</body>
</html>